{
  "module": "File Management",
  "component": "SchemaDetectionService",
  "testLevel": "Unit Test",
  "totalTestCases": 13,
  "testCases": [
    {
      "id": "TC-SDS-001",
      "title": "Detect Integer Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"123\", \"456\", \"789\", \"0\", \"-100\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"INTEGER\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-002",
      "title": "Detect Decimal Number Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"12.34\", \"56.78\", \"-90.12\", \"0.5\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"NUMBER\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-003",
      "title": "Detect Currency Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"$1,234.56\", \"$500.00\", \"$10,000.99\"] and values contain currency symbols and thousand separators",
      "when": "detectColumnType() is called",
      "then": "detected type is \"CURRENCY\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-004",
      "title": "Detect Date Type with ISO Format",
      "category": "Type Detection Tests",
      "given": "a column with values [\"2024-01-15\", \"2024-02-20\", \"2024-03-10\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"DATE\" and detected format is \"yyyy-MM-dd\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-005",
      "title": "Detect Date Type with US Format",
      "category": "Type Detection Tests",
      "given": "a column with values [\"01/15/2024\", \"02/20/2024\", \"12/31/2024\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"DATE\" and detected format is \"MM/dd/yyyy\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-006",
      "title": "Detect Date Type with European Format",
      "category": "Type Detection Tests",
      "given": "a column with values [\"15-Jan-2024\", \"20-Feb-2024\", \"10-Mar-2024\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"DATE\" and detected format is \"dd-MMM-yyyy\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-007",
      "title": "Detect Email Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"user@example.com\", \"test.user@domain.co.uk\", \"admin@company.org\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"EMAIL\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-008",
      "title": "Detect Percentage Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"15.5%\", \"100%\", \"0.5%\", \"99.99%\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"PERCENTAGE\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-009",
      "title": "Detect Boolean Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"true\", \"false\", \"true\", \"false\"]",
      "when": "detectColumnType() is called",
      "then": "detected type is \"BOOLEAN\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-010",
      "title": "Detect Text Type as Default",
      "category": "Type Detection Tests",
      "given": "a column with values [\"John Smith\", \"Jane Doe\", \"Bob Johnson\"] and values do not match any specific type pattern",
      "when": "detectColumnType() is called",
      "then": "detected type is \"TEXT\" and confidence score is 1.0"
    },
    {
      "id": "TC-SDS-011",
      "title": "Handle Mixed Types with Dominant Type",
      "category": "Type Detection Tests",
      "given": "a column with values [\"123\", \"456\", \"789\", \"abc\", \"xyz\"] and 60% are integers, 40% are text",
      "when": "detectColumnType() is called",
      "then": "detected type is \"INTEGER\" and confidence score is 0.6"
    },
    {
      "id": "TC-SDS-012",
      "title": "Handle Null Values in Column",
      "category": "Null and Edge Case Tests",
      "given": "a column with values [\"123\", null, \"456\", \"\", \"789\"] and column contains 2 null/empty values out of 5",
      "when": "detectColumnType() is called",
      "then": "null values are excluded from type detection and type is detected based on non-null values only and detected type is \"INTEGER\""
    },
    {
      "id": "TC-SDS-013",
      "title": "Detect Full Schema for File",
      "category": "Schema Analysis Tests",
      "given": "a parsed file with 4 columns: id (integers), name (text), amount (currency), date (dates)",
      "when": "detectSchema() is called with the parsed data",
      "then": "schema contains 4 ColumnSchema objects and each ColumnSchema has correct name, type, uniqueCount, and sampleValues and sampleValues contains up to 5 example values per column and uniqueCount reflects distinct value count for each column"
    }
  ],
  "testDataRequirements": {
    "sampleColumnData": {
      "integers": ["123", "456", "789", "0", "-100"],
      "decimals": ["12.34", "56.78", "-90.12", "0.5"],
      "currency": ["$1,234.56", "$500.00", "$10,000.99", "€500.00", "¥10000"],
      "dates": {
        "iso": ["2024-01-15", "2024-02-20", "2024-03-10"],
        "us": ["01/15/2024", "02/20/2024", "12/31/2024"],
        "european": ["15-Jan-2024", "20-Feb-2024", "10-Mar-2024"]
      },
      "emails": ["user@example.com", "test.user@domain.co.uk", "admin@company.org"],
      "percentages": ["15.5%", "100%", "0.5%", "99.99%"],
      "booleans": ["true", "false", "yes", "no", "1", "0"],
      "text": ["John Smith", "Jane Doe", "Bob Johnson"],
      "mixed": ["123", "456", "789", "abc", "xyz"]
    },
    "mockObjects": [
      "List<Map<String, String>> representing parsed file data"
    ]
  }
}
